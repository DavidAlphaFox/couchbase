FILE(READ json2.js JSON2_JS)
FILE(READ filter.js FILTER_JS)
FILE(READ mimeparse.js MIMEPARSE_JS)
FILE(READ render.js RENDER_JS)
FILE(READ state.js STATE_JS)
FILE(READ util.js UTIL_JS)
FILE(READ validate.js VALIDATE_JS)
FILE(READ views.js VIEWS_JS)
FILE(READ coffee-script.js COFFEE_SCRIPT_JS)
FILE(READ loop.js LOOP_JS)

FILE(WRITE ${CMAKE_CURRENT_BINARY_DIR}/main.js "// DO NOT EDIT THIS FILE BY HAND")
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main.js ${JSON2_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main.js ${FILTER_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main.js ${MIMEPARSE_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main.js ${RENDER_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main.js ${STATE_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main.js ${UTIL_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main.js ${VALIDATE_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main.js ${VIEWS_JS})

FILE(WRITE ${CMAKE_CURRENT_BINARY_DIR}/main-coffee.js "// DO NOT EDIT THIS FILE BY HAND")
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main-coffee.js ${JSON2_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main-coffee.js ${FILTER_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main-coffee.js ${MIMEPARSE_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main-coffee.js ${RENDER_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main-coffee.js ${STATE_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main-coffee.js ${UTIL_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main-coffee.js ${VALIDATE_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main-coffee.js ${VIEWS_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main-coffee.js ${COFFEE_SCRIPT_JS})
FILE(APPEND ${CMAKE_CURRENT_BINARY_DIR}/main-coffee.js ${LOOP_JS})

INSTALL(FILES ${CMAKE_CURRENT_BINARY_DIR}/main.js
              ${CMAKE_CURRENT_BINARY_DIR}/main-coffee.js
        DESTINATION share/couchdb/server)
